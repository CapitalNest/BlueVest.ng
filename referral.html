<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Refer & Earn — BLUEVEST</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f8faff; --card:#ffffff; --muted:#58616a; --accent1:#0b63ff; --accent2:#2bd2ff;
    }
    [data-theme="dark"]{
      --bg:#061021; --card:rgba(20,20,35,0.9); --muted:#9aa6b2;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:'Poppins',system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      background: linear-gradient(180deg,var(--bg),#eef6ff 60%);
      -webkit-font-smoothing:antialiased; display:flex; align-items:center; justify-content:center; padding:28px; color: #0b1220;
    }
    [data-theme="dark"] body{ color:#dbeafe; background: linear-gradient(180deg,#061021,#021029 60%); }

    /* loader */
    .preloader{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:1200; background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(245,248,255,0.65)); transition:opacity .45s, visibility .45s; }
    [data-theme="dark"] .preloader{ background: linear-gradient(180deg, rgba(6,16,33,0.95), rgba(2,6,16,0.6)); }
    .preloader.hidden{ opacity:0; visibility:hidden; pointer-events:none }
    .loader-wrap{ display:flex; flex-direction:column; align-items:center; gap:12px }
    .blue-ring{ width:94px;height:94px;border-radius:50%; background: radial-gradient(circle at 35% 35%, rgba(43,210,255,0.14), transparent 30%), conic-gradient(from 0deg, rgba(11,99,255,0.95), rgba(43,210,255,0.85)); box-shadow:0 6px 30px rgba(11,99,255,0.18); animation:spin 1.7s linear infinite; display:grid;place-items:center; }
    .blue-ring .core{ width:56px;height:56px;border-radius:50%; background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(245,247,255,0.9)); display:grid;place-items:center;font-weight:700;color:var(--accent1);font-size:12px; box-shadow:0 6px 18px rgba(11,99,255,0.12) }
    .loader-sub{ font-size:13px; color:var(--muted); max-width:320px; text-align:center }
    @keyframes spin{ to{ transform:rotate(360deg) } }

    /* card */
    .wrap{ width:100%; max-width:820px; margin-top:14px }
    .card{
      background:var(--card); border-radius:14px; box-shadow:0 10px 30px rgba(11,63,120,0.06); padding:22px; max-width:560px; margin:0 auto;
    }
    header.top{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:14px; }
    .brand{ display:flex; gap:12px; align-items:center }
    .logo{ width:56px;height:56px;border-radius:10px; display:grid;place-items:center; background: linear-gradient(135deg,var(--accent1),var(--accent2)); color:white; font-weight:700 }
    .brand h1{ margin:0; font-size:18px; color:var(--accent1) }
    .brand p{ margin:0; font-size:12px; color:var(--muted) }
    .controls{ display:flex; gap:10px; align-items:center }
    .theme-toggle{ background:transparent; border:1px solid rgba(11,99,255,0.08); padding:8px 12px; border-radius:10px; cursor:pointer; color:var(--accent1) }

    main.content{ display:flex; flex-direction:column; gap:14px }
    h2.title{ font-size:20px; color:var(--accent1); margin:6px 0 2px }
    .instruction{ padding:12px; border-radius:10px; background: rgba(11,99,255,0.03); color:var(--muted); font-size:14px; line-height:1.45 }
    .note{ font-size:14px; color:var(--muted) }

    .code-area{ display:flex; gap:10px; align-items:center; margin-top:8px; flex-wrap:wrap }
    .code-box{ padding:12px 14px; border-radius:10px; background: linear-gradient(180deg, rgba(11,99,255,0.04), rgba(255,255,255,0.02)); border:1px dashed rgba(11,99,255,0.06); font-weight:700; color:var(--accent1); min-width:180px; text-align:center }
    .link-box{ padding:10px 12px; border-radius:10px; background: rgba(11,99,255,0.02); color:var(--muted); border:1px solid rgba(11,99,255,0.05); font-size:13px }

    .btn{ padding:12px 16px; border-radius:10px; background: linear-gradient(90deg,var(--accent1),var(--accent2)); color:white; border:0; cursor:pointer; font-weight:700; box-shadow:0 10px 30px rgba(11,99,255,0.12) }
    .btn.secondary{ background:transparent; color:var(--accent1); border:1px solid rgba(11,99,255,0.08) }

    @media(max-width:560px){
      .card{ padding:18px }
      .code-box{ min-width:140px; font-size:14px }
    }
  </style>
</head>
<body>
  <!-- Loader -->
  <div id="preloader" class="preloader" aria-hidden="true">
    <div class="loader-wrap" role="status" aria-live="polite">
      <div class="blue-ring" aria-hidden="true"><div class="core">BLUEVEST</div></div>
      <div class="loader-sub">Preparing your referral tools…</div>
    </div>
  </div>

  <div class="wrap">
    <div class="card" role="main" aria-labelledby="pageTitle">
      <header class="top">
        <div class="brand">
          <div class="logo">BV</div>
          <div>
            <h1 id="pageTitle">BLUEVEST</h1>
            <p>Refer & Earn — Real rewards</p>
          </div>
        </div>

        <div class="controls">
          <button id="themeToggle" class="theme-toggle" aria-pressed="false">Toggle Theme</button>
        </div>
      </header>

      <main class="content">
        <h2 class="title">Refer & Earn</h2>

        <div class="instruction">
          Invite friends to join BlueVest. You will receive <strong>₦1,000</strong> for every user who signs up **using your referral code** and makes a deposit. Each person must sign up with the referral code in order to claim your reward.
        </div>

        <div class="note">Site to share: <strong>https://capitalnest.github.io/BlueVest.ng/</strong></div>

        <div class="code-area">
          <button id="generateBtn" class="btn">Generate My Code</button>
          <div id="codeBox" class="code-box" style="display:none"></div>
          <div id="shareBox" class="link-box" style="display:none"></div>
        </div>

        <div class="note" style="margin-top:6px">Each user can only generate one code on this device. Codes are unique and saved locally.</div>
      </main>
    </div>
  </div>

<script>
  // Theme logic (same as other pages)
  (function(){
    const saved = localStorage.getItem('bluevest_theme') || 'light';
    if (saved === 'dark') document.documentElement.setAttribute('data-theme','dark');
    const btn = document.getElementById('themeToggle');
    btn.addEventListener('click', ()=>{
      const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
      if(isDark){ document.documentElement.removeAttribute('data-theme'); localStorage.setItem('bluevest_theme','light'); btn.setAttribute('aria-pressed','false'); }
      else { document.documentElement.setAttribute('data-theme','dark'); localStorage.setItem('bluevest_theme','dark'); btn.setAttribute('aria-pressed','true'); }
    });
  })();

  // Preloader fade
  (function(){ const pre = document.getElementById('preloader'); setTimeout(()=> pre.classList.add('hidden'), 850); })();

  // Referral code logic
  const generateBtn = document.getElementById('generateBtn');
  const codeBox = document.getElementById('codeBox');
  const shareBox = document.getElementById('shareBox');

  function createUniqueCode(){
    // random + timestamp to ensure uniqueness
    const rnd = Math.random().toString(36).substring(2,9).toUpperCase();
    const tail = Date.now().toString().slice(-5);
    return 'REF-' + rnd + tail;
  }

  function displayCode(code){
    codeBox.textContent = code;
    codeBox.style.display = 'block';
    shareBox.textContent = '';
    shareBox.style.display = 'block';
  }

  generateBtn.addEventListener('click', ()=>{
    let existing = localStorage.getItem('bluevest_referral');
    if(existing){
      // if code exists, show it and disable btn
      displayCode(existing);
      generateBtn.textContent = 'Code Already Generated';
      generateBtn.disabled = true;
      generateBtn.classList.add('secondary');
      return;
    }
    const code = createUniqueCode();
    localStorage.setItem('bluevest_referral', code);
    displayCode(code);
    generateBtn.textContent = 'Code Generated';
    generateBtn.disabled = true;
    generateBtn.classList.add('secondary');
  });

  // Show code automatically if exists
  window.addEventListener('load', ()=>{
    const existing = localStorage.getItem('bluevest_referral');
    if(existing){
      displayCode(existing);
      generateBtn.textContent = 'Code Already Generated';
      generateBtn.disabled = true;
      generateBtn.classList.add('secondary');
    }
  });
</script>
</body>
</html>
